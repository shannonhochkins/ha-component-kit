import { Source, Meta } from '@storybook/blocks';
import callApiExample from './examples/callApi.code?raw';

<Meta title="core/hooks/useHass/hass/callApi" />

# callApi()
###### `callApi(endpoint: string, options?: FetchOptions)`
This will trigger a request to the [REST API](https://developers.home-assistant.io/docs/api/rest/#actions) for home assistant.

The [api integration](https://www.home-assistant.io/integrations/api/) exposes a RESTful API and allows one to interact with a Home Assistant instance that is running headless. This integration depends on the [HTTP integration](https://www.home-assistant.io/integrations/http/).

By default, this will trigger a GET request, you'll need to provide the options argument to update the method and body of the request of changing to POST.

> **1**: If you are not using the [frontend](https://www.home-assistant.io/integrations/frontend/) in your setup then you need to add the [api integration](https://www.home-assistant.io/integrations/api/) to your configuration.yaml file.

> **2**: You do not need to provide the `/api` prefix to the endpoint. This is added automatically.

> **3**: If you're developing locally, you may need to add the port of your local server to the `cors_allowed_origins` list in your configuration.yaml for the [http integration](https://www.home-assistant.io/integrations/http/), example:

<Source dark language="yaml" code={`
# Example configuration.yaml entry
http:
  cors_allowed_origins: 
    # local development service
    - http://localhost:1234
`} />

### Example Usage
The below is an example of how to use the hook to retrieve calendar events from home assistant.
I recommend you read the documentation for the [REST API](https://developers.home-assistant.io/docs/api/rest/#actions) before attempting to use the callApi function as it will help you understand what you need to pass to the function and what you can expect to get back.

<Source dark language="ts" code={callApiExample} />

