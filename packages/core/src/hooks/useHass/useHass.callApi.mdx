import { Source, Meta } from '@storybook/blocks';

<Meta title="HOOKS/useHass/callApi" />

# callApi()
###### `callApi(endpoint: string, options: FetchOptions)`
This will trigger a request to the [REST API](https://developers.home-assistant.io/docs/api/rest/#actions) for home assistant.

You will at least need to add the following to your configuration.yaml in home assistant to enable the api:

<Source dark language="yaml" code={`
api:
http:
  cors_allowed_origins: 
    - http://localhost:8080
`} />

**NOTE**: If you're developing locally, you'll need to add the port of your local server to the `cors_allowed_origins` list.

### Example Usage

<Source dark language="ts" code={`
function CallApiExample() {
  const { callApi } = useHass();
  const retrieveCalendarEvents = useCallback(() => {
    const events = await callApi('/calendars/calendar.google_calendar?start=2023-09-30T14:00:00.000Z&end=2023-11-11T13:00:00.000Z');
    console.log('events', events);
  }, [callApi]);
  return <Button onClick={retrieveCalendarEvents}>
    REQUEST EVENTS
  </Button>
}
`} />

**NOTE**: You do not need to provide the /api prefix to the endpoint. This is added automatically.
